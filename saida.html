<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Conversor de Moeda - Sa√≠da</title>
		<script>
			function voltar () {
				location.href = "entrada.html"
			}
			
			function callBack(){
				var oResponse = this;
				var sResponseBody = oResponse.responseText;
				var oJSON = JSON.parse(sResponseBody);
				var sReais = oJSON.rates.BRL;
				var oUrl = new URL(location.href);
				var sValorOrigem = oUrl.searchParams.get("valor_origem");
				var sValorConvertido = sValorOrigem * sReais;
				
				document.querySelector("#valor_destino").value = sValorConvertido;
			}
			
			function chamaAPI(){
				const sUrl = "https://api.exchangeratesapi.io/latest";
				var oRequest = new XMLHttpRequest();
				
				oRequest.addEventListener("load", callBack);
				oRequest.open("GET", sUrl);
				oRequest.send();
			}
			
			window.onload = function () {
				chamaAPI();
			}
			
		</script>
	</head>
	<body>
		<label>Moeda de destino</label>
		<input type="text" minlength="3" maxlength="3" value="BRL" size="3" disabled>
		<br /><br />
		<label>Valor do destino</label>
		<input type="number" id="valor_destino" disabled>
		<br/><br/>
		<button type="button" onclick="voltar()">Voltar</button>
	</body>
</html>